<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <base href="/">

        <title>Azzouz FPL</title>

        <!-- CSS
        <link rel="stylesheet" href="css/style.css">  custom styles -->

        <!-- JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular.min.js"></script>
        <!-- ANGULAR CUSTOM -->
        <script src="app.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        <link href="https://afeld.github.io/emoji-css/emoji.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="style.css">

    </head>
    <body ng-app="azzouz-fpl" ng-controller="mainCtrl">
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
                <span class="close" ng-click="hideModal()">&times;</span>
                <p>error is : {{ error}}</p>
            </div>

        </div>
        <div class="container">
            <ul class="nav nav-tabs" style="
                background-color: rgba(19, 95, 63, 0.41);
                border-bottom:  none !important;
    border: 1px solid white;
    font-size: 36px;
    width: 80%;
    color: white;
    margin: 1px auto;">
                <span class="active" style="width: 100%;">Khniss city statistiques</span>
            </ul>
            <div class="tab-content">
                <div style ="    padding-left: 0;" id="home" class="element tab-pane in active">
                    <div>
                        <select class="list-option" ng-model="option" ng-change="isOption(option)">
                            <option value="stats">statistiques kol wa7ed</option>
                            <option value="cup">إلي تزعكو  مل كوب و إلي مازالو</option>
                            <option value="h2h">مواجهات مباشرة</option>
                            <option value="captains"> captain kol wa7ed</option>
                            <option value="transfer"> Transfer kol wa7ed</option>
                            <option value="average">  Average Gameweek points </option>  
                        </select>
                        <div ng-if="option == 'stats'" style="width: 88%;
                             margin: 0 auto;overflow: auto;">
                            <select ng-model="playerStats" ng-change="getTeamStats(playerStats)">
                                <option ng-repeat="player in leaguePlayers" value="{{player.entry}}">{{ player.player_name}}</option>
                            </select >
                            <div style="height: 100%;padding: 5px;margin-top: 10px;">
                                <div style="border: 1px solid red;">
                                    <span>
                                        Used Chips:
                                    </span>
                                    <li ng-repeat="chip in teamStats.chips">
                                        <span>{{ chip.chips}} GW</span>
                                        <span>{{ chip.event}} -----> </span>
                                        <span>{{ chip.points}} P</span>
                                    </li>
                                </div>
                                <div style="border: 1px solid red;width: 50%;float: left;">
                                    Total Trasnfer cost: {{ teamStats.totalTransfercost}}</div>
                                <div style="border: 1px solid red;width: 50%;float: right;">
                                    MaxPoints:
                                    <span>
                                        {{ teamStats.maxMinPoints.maxPoints.value}} In event  {{ teamStats.maxMinPoints.maxPoints.event}}
                                    </span>
                                </div>
                                <div style="border: 1px solid red;width: 50%;float: left;margin-bottom:  10px;">
                                    Min Points:
                                    <span>
                                        {{ teamStats.maxMinPoints.minPoints.value}} In event  {{ teamStats.maxMinPoints.minPoints.event}}
                                    </span>
                                </div>
                                <div style="border: 1px solid red;width: 50%;float: right;margin-bottom:  10px;">
                                    Max Benched:
                                    <span>
                                        {{ teamStats.maxMinPoints.maxBenchedPoints.value}} In event  {{ teamStats.maxMinPoints.maxBenchedPoints.event}}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="option == 'h2h'">
                        <select ng-model="player1">
                            <option ng-repeat="player in leaguePlayers" value="{{player.entry}}">{{ player.player_name}}</option>
                        </select >
                        <select ng-model="player2">
                            <option ng-repeat="player in leaguePlayers" value="{{player.entry}}">{{ player.player_name}}</option>
                        </select>
                        <div>
                            <button class="btn btn-primary" ng-click="h2h(player1, player2)">Resultat</button>
                        </div>
                        <div ng-if="h2hData != undefined" style="width: 90%;margin: 0 auto;margin-top: 35px;font-size: 28px;">
                            <span>{{ h2hData.player1.name}} : {{ h2hData.player1.wins}}</span>
                            <br>
                            <span>{{ h2hData.player2.name}} : {{ h2hData.player2.wins}}</span>
                            <br>
                            <span>Null: {{ h2hData.draw}} </span>
                            <br>
                        </div>
                    </div>
                    <div ng-if="option == 'cup'" style="width: 88%;
                         margin: 0 auto;">
                        <li style="font-size: 15px;" ng-repeat="player in leaguePlayersInCup" class="item" ng-class="player.cupStatus ? 'success' : 'danger'">{{ player.teamName}}<span style="margin-right: 5px;float: right"> Played: {{ player.cupRoundsPlayed.roundsPlayed}}</span> </li>
                    </div>
                    <div ng-if="option == 'average'" style="width: 88%;
                         margin: 0 auto;">
                        <li style="font-size: 15px;padding-left: 5px;"  ng-class="averageData.average > 0 ? player.event_total > averageData.average ? 'success' : 'danger' : ''" ng-repeat="player in leaguePlayers" class="item" >{{ player.entry_name}}<span style="margin-right: 5px;float: right"> {{player.event_total}}/{{averageData.average}}</span></li>
                    </div>
                    <div ng-if="option == 'highLow'">
                        {{ highestGameweek}}
                        <!--                            <span>
                                                        {{ highestGameweek.data.maxGameweekPoints.value }} --------- {{ highestGameweek.teamName }} in GW {{ highestGameweek.data.maxGameweekPoints.event }}
                                                    </span>
                                                    <br>
                                                    <span>
                                                        {{ lowesttGameweek.data.maxBenchedPoints.value }} --------- {{ lowesttGameweek.teamName }} in GW {{ lowesttGameweek.data.maxBenchedPoints.event }}
                                                    </span>-->
                    </div>
                    <div ng-if="option == 'captains'" style="width: 88%;
                         margin: 0 auto;">
                        <select ng-model="criteria" ng-change="sortCaptains(criteria)" style="                             margin-bottom: 15px;">
                            <option value="captained">أكثر واحد مكبتتنو</option>
                            <option value="score">أكثركابتين جاب سكور</option>
                        </select>
                        <div style="
                             margin: 0;
                             margin-bottom: 4px;
                             text-align: center;
                             border: 2px solid;
                             font-size: 20px; 
                             padding-top: 5px;
                             border-radius: 2px;
                             padding-left: 0;; 
                             " ng-repeat="player in playersCaptains" class="item" >
                            <span style="color: brown;" ng-if="criteria == 'captained'"><b>{{ player[0]}} - captained {{ player[1].length}}</b></span>
                            <div ng-if="criteria == 'captained'" ng-repeat="team in player[1]" style="border-bottom: 1px dashed;    margin-bottom: -1px;">
                                <b><span style=" font-size: 18px;     ">{{team.teamName}}</span></b>
                                <div style="    font-size: 15px;">Captain: <span> {{team.captain}} / {{ team.captainScore}} </span></div>
                                <div style="    font-size: 15px;">Vice-C: <span>  {{team.viceCaptain}} / {{ team.viceCaptainScore}} </span></div>
                            </div>

                            <b><span ng-if="criteria == 'score'" style=" font-size: 18px;">{{ player.teamName}}</span><b>
                                    <div ng-if="criteria == 'score'"  style="font-size: 15px;">Captain: <span> {{player.captain}} / {{ player.captainScore}} </span></div>
                                    <div ng-if="criteria == 'score'" style="    font-size: 15px;">Vice-C: <span>  {{player.viceCaptain}} / {{ player.viceCaptainScore}} </span></div>

                                    </div>
                                    </div>
                                    <img ng-if="loading" src="loader.gif" style="margin-top: 25px;height: 35px;"/>
                                    <div ng-if="option == 'transfer'" style="width: 88%;
                                         margin: 0 auto;">
                                        Gameweek: <select style="    margin-bottom: 5px;" ng-model="gameweek" ng-change="getTransfers(9908, gameweek)">
                                            <option ng-repeat="event in events" value="{{ event}}">Gameweek {{ event}}</option>
                                            <!--                            <option  value="2">Gameweek 2</option>
                                                                        <option  value="3">Gameweek 3</option>
                                                                        <option  value="4">Gameweek 4</option>
                                                                        <option  value="5">Gameweek 5</option>
                                                                        <option  value="6">Gameweek 6</option>
                                                                        <option  value="7">Gameweek 7</option>
                                                                        <option  value="8">Gameweek 8</option>
                                                                        <option  value="9">Gameweek 9</option>
                                                                        <option  value="10">Gameweek 10</option>
                                                                        <option  value="11">Gameweek 11</option>
                                                                        <option  value="12">Gameweek 12</option>
                                                                        <option  value="13">Gameweek 13</option>
                                                                        <option  value="14">Gameweek 14</option>
                                                                        <option  value="15">Gameweek 15</option>
                                                                        <option  value="16">Gameweek 16</option>
                                                                        <option  value="17">Gameweek 17</option>
                                                                        <option  value="18">Gameweek 18</option>
                                                                        <option  value="19">Gameweek 19</option>
                                                                        <option  value="20">Gameweek 20</option>
                                                                        <option  value="20">Gameweek 21</option>-->
                                        </select>
                                        <div style="    font-size: 14px;
                                             text-align: center;
                                             border: 3px solid;
                                             margin-bottom: 6px;
                                             border-radius: 4px;" ng-repeat="player in playerTransfers" class="item" >
                                            <b><span>{{ player.teamName}}</span></b>
                                            <div ng-if="player.transfers.length > 0" style="border: 1px solid;
                                                 margin-bottom: 6px;
                                                 margin-left: 7px;
                                                 margin-right: 7px;">
                                                <div ng-repeat="transfer in player.transfers" style="
                                                     font-size: 13px;
                                                     margin: 0;
                                                     margin-bottom: -1px;
                                                     text-align: center;
                                                     border-bottom: 1px dashed;
                                                     ">
                                                    <div> <span class="glyphicon glyphicon-arrow-right" style="color:green;"></span> {{ transfer.transfer_in}} / {{transfer.transfer_in_points}} </div>
                                                    <div><span class="glyphicon glyphicon-arrow-left" style="color:red;"></span> {{ transfer.transfer_out}} / {{transfer.transfer_out_points}} </div>
                                                    <span style="float: right;
                                                          margin-top: -27px;
                                                          margin-right: 10px;" ng-if="transfer.transfer_in_points < transfer.transfer_out_points">🐴</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br>            

                                    </div>
                                    </div>

                                    <!--<div id="menu5" class="element tab-pane fade">-->
                                    <!--<div class="test"><h1>Total Transfert Cost</h1>-->
                                    <!--<p>This feature let's you get total cost of transferts you made till the current gameweek</p>-->
                                    <!--<P>Enter your team ID here:</P><input ng-model="id5" type="text" class="form-control">-->
                                    <!--<button ng-click="totalCost(id5)" class="btn btn-primary">Get result</button>-->
                                    <!--</div>-->
                                    <!--<div class="test result"><h1>Result:</h1>-->
                                    <!--<div class="data">{{ tcost }}</div>-->
                                    <!--</div>-->
                                    <!--</div>-->
                                    </div>
<!--                                    <div><input ng-model="code"/>
                                        <input ng-model="eventToSetAsCurrent">
                                        <button ng-click="setCurrentEvent(eventToSetAsCurrent, code)">event</button>
                                    </div>-->

                                    </body>
                                    </html>
